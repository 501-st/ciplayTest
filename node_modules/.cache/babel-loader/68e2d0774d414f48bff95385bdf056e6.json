{"ast":null,"code":"import axios from \"axios\";\nimport { errorAction, loginAction } from \"../store/userReducer\";\nexport const login = (email, password) => dispatch => {\n  axios.post(`/login`, {\n    email,\n    password\n  }).then(response => {\n    if (response.data.token) {\n      localStorage.setItem(\"token\", response.data.token);\n      dispatch(loginAction(true));\n    } else dispatch(errorAction(response.data.error.message));\n  }).catch(e => dispatch(errorAction(e.message)));\n};\nexport const registration = (email, password) => dispatch => {\n  axios.post(`/registration`, {\n    email,\n    password\n  }).then(response => {\n    if (response.data.token) {\n      localStorage.setItem(\"token\", response.data.token);\n      dispatch(loginAction(true));\n    } else dispatch(errorAction(response.data.error.message));\n  }).catch(e => dispatch(errorAction(e.message)));\n};\nexport const changePassword = password => dispatch => {\n  axios.post(`/change-password`, {\n    password\n  }).then(response => {\n    if (response.status === \"\") {\n      localStorage.setItem(\"token\", response.data.token);\n      dispatch(loginAction(true));\n    } else dispatch(errorAction(response.data.error.message));\n  }).catch(e => dispatch(errorAction(e.message)));\n};","map":{"version":3,"names":["axios","errorAction","loginAction","login","email","password","dispatch","post","then","response","data","token","localStorage","setItem","error","message","catch","e","registration","changePassword","status"],"sources":["/home/daniil/github/ciplay/src/api/index.js"],"sourcesContent":["import axios from \"axios\";\nimport {errorAction, loginAction} from \"../store/userReducer\";\n\nexport const login = (email, password) => (\n    (dispatch) => {\n        axios.post(`/login`, {email, password}).then(\n            response => {\n                if (response.data.token) {\n                    localStorage.setItem(\"token\", response.data.token)\n                    dispatch(loginAction(true));\n                } else\n                    dispatch(errorAction(response.data.error.message))\n            }\n        ).catch(e => dispatch(errorAction(e.message)))\n    }\n)\n\nexport const registration = (email, password) => (\n    (dispatch) => {\n        axios.post(`/registration`, {email, password}).then(\n            response => {\n                if (response.data.token) {\n                    localStorage.setItem(\"token\", response.data.token)\n                    dispatch(loginAction(true));\n                } else\n                    dispatch(errorAction(response.data.error.message))\n            }\n        ).catch(e => dispatch(errorAction(e.message)))\n    }\n)\n\nexport const changePassword = (password) => (\n    (dispatch) => {\n        axios.post(`/change-password`, {password}).then(\n            response => {\n                if (response.status === \"\") {\n                    localStorage.setItem(\"token\", response.data.token)\n                    dispatch(loginAction(true));\n                } else\n                    dispatch(errorAction(response.data.error.message))\n            }\n        ).catch(e => dispatch(errorAction(e.message)))\n    }\n)"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,sBAAvC;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAQC,QAAR,KAChBC,QAAD,IAAc;EACVN,KAAK,CAACO,IAAN,CAAY,QAAZ,EAAqB;IAACH,KAAD;IAAQC;EAAR,CAArB,EAAwCG,IAAxC,CACIC,QAAQ,IAAI;IACR,IAAIA,QAAQ,CAACC,IAAT,CAAcC,KAAlB,EAAyB;MACrBC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,QAAQ,CAACC,IAAT,CAAcC,KAA5C;MACAL,QAAQ,CAACJ,WAAW,CAAC,IAAD,CAAZ,CAAR;IACH,CAHD,MAIII,QAAQ,CAACL,WAAW,CAACQ,QAAQ,CAACC,IAAT,CAAcI,KAAd,CAAoBC,OAArB,CAAZ,CAAR;EACP,CAPL,EAQEC,KARF,CAQQC,CAAC,IAAIX,QAAQ,CAACL,WAAW,CAACgB,CAAC,CAACF,OAAH,CAAZ,CARrB;AASH,CAXE;AAcP,OAAO,MAAMG,YAAY,GAAG,CAACd,KAAD,EAAQC,QAAR,KACvBC,QAAD,IAAc;EACVN,KAAK,CAACO,IAAN,CAAY,eAAZ,EAA4B;IAACH,KAAD;IAAQC;EAAR,CAA5B,EAA+CG,IAA/C,CACIC,QAAQ,IAAI;IACR,IAAIA,QAAQ,CAACC,IAAT,CAAcC,KAAlB,EAAyB;MACrBC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,QAAQ,CAACC,IAAT,CAAcC,KAA5C;MACAL,QAAQ,CAACJ,WAAW,CAAC,IAAD,CAAZ,CAAR;IACH,CAHD,MAIII,QAAQ,CAACL,WAAW,CAACQ,QAAQ,CAACC,IAAT,CAAcI,KAAd,CAAoBC,OAArB,CAAZ,CAAR;EACP,CAPL,EAQEC,KARF,CAQQC,CAAC,IAAIX,QAAQ,CAACL,WAAW,CAACgB,CAAC,CAACF,OAAH,CAAZ,CARrB;AASH,CAXE;AAcP,OAAO,MAAMI,cAAc,GAAId,QAAD,IACzBC,QAAD,IAAc;EACVN,KAAK,CAACO,IAAN,CAAY,kBAAZ,EAA+B;IAACF;EAAD,CAA/B,EAA2CG,IAA3C,CACIC,QAAQ,IAAI;IACR,IAAIA,QAAQ,CAACW,MAAT,KAAoB,EAAxB,EAA4B;MACxBR,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,QAAQ,CAACC,IAAT,CAAcC,KAA5C;MACAL,QAAQ,CAACJ,WAAW,CAAC,IAAD,CAAZ,CAAR;IACH,CAHD,MAIII,QAAQ,CAACL,WAAW,CAACQ,QAAQ,CAACC,IAAT,CAAcI,KAAd,CAAoBC,OAArB,CAAZ,CAAR;EACP,CAPL,EAQEC,KARF,CAQQC,CAAC,IAAIX,QAAQ,CAACL,WAAW,CAACgB,CAAC,CAACF,OAAH,CAAZ,CARrB;AASH,CAXE"},"metadata":{},"sourceType":"module"}